package ers

author  Matthias.Wiesmann@cern.ch
manager	Serguei.Kolos@cern.ch

use TDAQCPolicy
use Boost	*  TDAQCExternal

private

macro build_dependencies	'$(cmtexe) -quiet -tag=$(tags) build dependencies'

########################################################################################################
#       ERS Library
########################################################################################################

library		ers				$(lib_opts)	"*.cxx"
macro           ers_shlibflags          	"" 

library		ErsBaseStreams			$(lib_opts)	"streams/*.cxx"
macro           ErsBaseStreams_shlibflags          " -lers" 

macro		instlibs		"libers.so libErsBaseStreams.so"	\
		osx			"libers.dylib libErsBaseStreams.dylib"
		
apply_pattern   install_libs            files=$(instlibs)

########################################################################################################
#       Test applications
########################################################################################################

application	ers_test 		"-group=check -check ../test/test.cxx"
application	ers_pc 			"../bin/config.cxx"

macro		ers_test_dependencies	"ers" 
macro		ers_testlinkopts	"-lers "

macro		ers_pc_dependencies	"ers" 
macro		ers_pclinkopts		"-lers "

apply_pattern   install_apps            files="ers_pc"
